<%-include('../partials/user/profileSidebar.ejs')%>
            <!-- Profile Details -->
            <div id="profile" class="section">
                <h3>Profile Details</h3>
                <form id="profileForm" action="/profile/updateProfile" method="POST">
                    <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" name="name" value="<%= user.name%>">
                    <small id="nameError" style="color: red; display: none;">Please enter a valid name (Dont use symbols or special characters).</small>
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" value="<%= user.email%>" disabled>
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" name="phone" value="<%= user.phone%>" placeholder="Enter 10 digit phone number" >
                    <small id="PhoneError" style="color: red; display: none;">Phone number should consist of 10 digits.</small>
                </div>
                <button><a href="/changePassword" style="text-decoration: none;color: aliceblue;">Change Password</a></button>
                <br>
                <br>
                <button type="submit">Save Changes</button>
            </form>
            </div>
        </div>
        <script>
            document.getElementById('profileForm').addEventListener('submit', function (event) {
                const phone = document.getElementById('phone');
                const PhoneError = document.getElementById('PhoneError');
                const phoneTrimmed = phone.value.trim();
                const nameInput = document.getElementById('name');
                const nameError = document.getElementById('nameError');
                const trimmedName = nameInput.value.trim();
                const namePattern = /^[a-zA-Z\s]+$/;
                const phonePattern = /^\d{10}$/;

        
                if (!trimmedName || !namePattern.test(trimmedName)) {
                    nameError.style.display = 'block';
                    event.preventDefault(); 
                }else {
                    nameError.style.display = 'none';
                }
                if(phoneTrimmed.length == 10 && phonePattern.test(phoneTrimmed)){
                PhoneError.style.display='none'
            }else{
                PhoneError.style.display='block'
                event.preventDefault()
            }
            });

        </script>
</body>

</html>
